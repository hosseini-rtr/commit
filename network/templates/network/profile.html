{% extends "network/layout.html" %}

<div class="container p-4">
  {% block body %} {% if user.is_authenticated %}

  <h1>{% if user == user_profile %} Hi {%else%} It's {%endif%} {{username}}</h1>
  <div class="d-flex row justify-content-around">
    <div>
      <h3>Follower:{{followers.count}}</h3>
    </div>
    <div>
      <h3>Following:{{following.count}}</h3>
    </div>
  </div>
  {% if user.is_authenticated %}
  <div>
    {% if user != user_profile %} {% if isFollowing %}
    <!-- Unfollow -->
    <form method="POST" action="{% url 'unfollowing'  %}">
      {%csrf_token%}
      <input type="hidden" value="{{username}}" name="username" />
      <button type="submit" class="btn btn-outline-danger">Unfollow</button>
    </form>
    {%else%}
    <!-- Follow -->
    <form method="POST" action="{% url 'following'  %}">
      {%csrf_token%}
      <input type="hidden" value="{{username}}" name="username" />
      <button type="submit" class="btn btn-outline-info">Follow</button>
    </form>
    {% endif %} {% endif %}
  </div>
  {% endif %} {% if user.is_authenticated %}
  <div>
    {% if user == user_profile %}
    <div>{% include 'network/components/post_form.html' %}</div>
    {%endif%} {%endif%}

    <div>
      {% for post in posts_of_the_page %}
      <div>{% include "network/components/posts.html" with post=post %}</div>

      {%endfor%}
    </div>

    <nav aria-label="Page navigation example mt-5">
      <ul class="pagination d-flex justify-content-center mt-5">
        {% if posts_of_the_page.has_previous %}
        <li class="page-item">
          <a
            class="page-link"
            href="?page={{posts_of_the_page.previous_page_number}}"
            aria-label="Previous"
          >
            <span aria-hidden="true">&laquo;</span>
            <span class="sr-only">Previous</span>
          </a>
        </li>
        {%endif%} {% if posts_of_the_page.has_next %}
        <li class="page-item">
          <a
            class="page-link"
            href="?page={{posts_of_the_page.next_page_number}}"
            aria-label="Next"
          >
            <span aria-hidden="true">&raquo;</span>
            <span class="sr-only">Next</span>
          </a>
        </li>
        {%endif%}
      </ul>
    </nav>

    {% endif %} {% endblock %}
  </div>
</div>
